<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>MUST LOVE Survey</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" type="text/css" href="../assets/css/style.css" />
  </head>

  <body>
    <div class="jumbotron jumbotron-fluid">
      <div class="container">
        <h1 class="display-4">Profile - Survey Page</h1>
        <p class="lead">
          Please provide your name, Google drive link to photo, and your
          horoscope sign to add to your profile. Then answer the 10 questions
          based on how strongly you Agree/Disagree with the "MUST LOVE"
          conditional statements.
        </p>
      </div>
    </div>

    <form>
      <div class="form-group" id="name-input">
        <label for="nameInput"><h3>Name (Required)</h3></label>
        <input
          type="name"
          class="form-control"
          id="nameInput"
          placeholder="Enter Name"
        />
      </div>

      <br />
      <div class="form-group" id="picture-input">
        <label for="pictureInput"><h3>Link to Photo Image</h3></label>
        <input
          class="form-control"
          id="pictureInput"
          placeholder="Google Drive Link"
        />
      </div>
      <br />

      <div class="form-group">
        <label for="horoscopeInput" id="horoscopeHeader"
          ><h3>Select Horoscope</h3>
        </label>
        <br />
        <select class="horoscope-select" id="horoscope">
          <option selected>Horoscope</option>
          <option value="1">Aries (March 21 - April 19)</option>
          <option value="2">Taurus (April 20 - May 20)</option>
          <option value="3">Gemini (May 21 - June 20)</option>
          <option value="4">Cancer (June 21 - July 22)</option>
          <option value="5">Leo (July 23 - August 23)</option>
          <option value="6">Virgo (August 24 - September 22)</option>
          <option value="7">Libra (September 23 - October 23)</option>
          <option value="8">Scorpio (October 24 - November 21)</option>
          <option value="9">Sagittarius (November 22 - December 21)</option>
          <option value="10">Capricorn (December 22 - January 19)</option>
          <option value="11">Aquarius (January 20 - February 18)</option>
          <option value="12">Pisces (February 19 - March 20)</option>
        </select>
      </div>

      <br />

      <div class="form-group">
        <label for="exampleFormControlSelect01" class="ratingSelector"
          >MUST LOVE dogs</label
        >
        <select class="custom-select" id="question01">
          <option selected>Question 1</option>
          <option value="1">One (Strongly Disagree)</option>
          <option value="2">Two</option>
          <option value="3">Three (Neither Disagree or Agree)</option>
          <option value="4">Four</option>
          <option value="5">Five (Strongly Agree)</option>
        </select>
      </div>

      <br />

      <div class="form-group">
        <label for="exampleFormControlSelect02" class="ratingSelector"
          >MUST LOVE cats</label
        >
        <select class="custom-select" id="question02">
          <option selected>Question 2</option>
          <option value="1">One (Strongly Disagree)</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
          <option value="4">Four</option>
          <option value="5">Five (Strongly Agree)</option>
        </select>
      </div>

      <br />

      <div class="form-group">
        <label for="exampleFormControlSelect03" class="ratingSelector"
          >>MUST LOVE kids</label
        >
        <select class="custom-select" id="question03">
          <option selected>Question 3</option>
          <option value="1">One (Strongly Disagree)</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
          <option value="4">Four</option>
          <option value="5">Five (Strongly Agree)</option>
        </select>
      </div>

      <br />

      <div class="form-group">
        <label for="exampleFormControlSelect04" class="ratingSelector"
          >MUST LOVE city light</label
        >

        <select class="custom-select" id="question04">
          <option selected>Question 4</option>
          <option value="1">One (Strongly Disagree)</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
          <option value="4">Four</option>
          <option value="5">Five (Strongly Agree)</option>
        </select>
      </div>

      <br />

      <div class="form-group">
        <label for="exampleFormControlSelect05" class="ratingSelector"
          >MUST LOVE star light</label
        >

        <select class="custom-select" id="question05">
          <option selected>Question 5</option>
          <option value="1">One (Strongly Disagree)</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
          <option value="4">Four</option>
          <option value="5">Five (Strongly Agree)</option>
        </select>
      </div>

      <br />

      <div class="form-group">
        <label for="exampleFormControlSelect06" class="ratingSelector"
          >MUST LOVE travel</label
        >

        <select class="custom-select" id="question06">
          <option selected>Question 6</option>
          <option value="1">One (Strongly Disagree)</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
          <option value="4">Four</option>
          <option value="5">Five (Strongly Agree)</option>
        </select>
      </div>
      <br />

      <div class="form-group">
        <label for="exampleFormControlSelect07" class="ratingSelector"
          >MUST LOVE passion</label
        >

        <select class="custom-select" id="question07">
          <option selected>Question 7</option>
          <option value="1">One (Strongly Disagree)</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
          <option value="4">Four</option>
          <option value="5">Five (Strongly Agree)</option>
        </select>
      </div>
      <br />

      <div class="form-group">
        <label for="exampleFormControlSelect08" class="ratingSelector"
          >MUST LOVE money</label
        >
        <select class="custom-select" id="question08">
          <option selected>Question 8</option>
          <option value="1">One (Strongly Disagree)</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
          <option value="4">Four</option>
          <option value="5">Five (Strongly Agree)</option>
        </select>
      </div>
      <br />

      <div class="form-group">
        <label for="exampleFormControlSelect09" class="ratingSelector"
          >MUST LOVE late nights</label
        >
        <select class="custom-select" id="question09">
          <option selected>Question 9</option>
          <option value="1">One (Strongly Disagree)</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
          <option value="4">Four</option>
          <option value="5">Five (Strongly Agree)</option>
        </select>
      </div>
      <br />

      <div class="form-group">
        <label for="exampleFormControlSelect10" class="ratingSelector"
          >MUST LOVE mornings</label
        >
        <select class="custom-select" id="question10">
          <option selected>Question 10</option>
          <option value="1">One (Strongly Disagree)</option>
          <option value="2">Two</option>
          <option value="3">Three</option>
          <option value="4">Four</option>
          <option value="5">Five (Strongly Agree)</option>
        </select>
      </div>
    </form>

    <button
      type="button"
      id="submitBtn"
      class="btn btn-primary btn-lg btn-block"
    >
      Submit my Profile and let me see who my new match is!
    </button>

    <!-- Modal showing match -->
    <div id="bestMatchModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">
              &times;
            </button>
            <h3 class="modal-title">Your Best Match</h3>
          </div>
          <div class="modal-body">
            <h2 id="bestMatch"></h2>
            <img id="bestMatchPhoto" src="#" />
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="container">
        <p id="APIs">
          <a href="/api/friends">API Friend List</a> <span>|</span>
          <a href="https://github.com/ScrantonPete/horoscopeOfLove/"
            >GitHub Repo</a
          >
        </p>
      </div>
    </footer>
  </body>
</html>

<script type="text/javascript">
  $("#submitBtn").on("click", function(event) {
    event.preventDefault();
    // validation of form being filled in correctly
    console.log("Hello");
    var validate = true;
    if ($("#name").val() === "" || $("#photo").val() === "") {
      validate = false;
    } else if (
      $("#question01").val() === "empty" ||
      $("#question02").val() === "empty" ||
      $("#question03").val() === "empty" ||
      $("#question04").val() === "empty" ||
      $("#question05").val() === "empty" ||
      $("#question06").val() === "empty" ||
      $("#question07").val() === "empty" ||
      $("#question08").val() === "empty" ||
      $("#question09").val() === "empty" ||
      $("#question10").val() === "empty"
    ) {
      validate = false;
    }
    if (validate === true) {
      var newUser = {
        name: $("#nameInput")
          .val()
          .trim(),
        photo: $("#pictureInput")
          .val()
          .trim(),
        sign: $("#horoscope")
          .val()
          .trim(),
        scores: [
          $("#question01").val(),
          $("#question02").val(),
          $("#question03").val(),
          $("#question04").val(),
          $("#question05").val(),
          $("#question06").val(),
          $("#question07").val(),
          $("#question08").val(),
          $("#question09").val(),
          $("#question10").val()
        ]
      };
      console.log(newUser);
      // var currentURL = window.location.origin;
      // Ajax call for receiving response after POST req
      $.post("/api/friends", newUser, function(data) {
        console.log(data);
        $("#bestMatch").text(data.name);
        $("#bestMatchPhoto").attr("src", data.photo);
        console.log(data.photo);
        $("#bestMatchModal").modal("toggle");
      });
    } else {
      // If a required field is missing, show alert
      alert("Please fill in all questions and profile info!");
    }
  });
</script>
